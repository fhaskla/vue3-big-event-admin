import{t as b,q as n,e as V,w as l,o as y,y as o,f as s,z as E,C as w,c2 as x,G as B,E as C}from"./index-BtdZa8Qe.js";import{E as F,a as P}from"./el-form-item-Dg5GH0_m.js";import{_ as U,E as k}from"./_plugin-vue_export-helper-CkUarTxb.js";import{E as q}from"./el-input-C-TomgvI.js";import{P as z}from"./PageContainer-YCxXl0ht.js";import{F as I}from"./FormBody-B0cIz5IE.js";import"./el-message-CgnsFL7S.js";const S={class:"button-center"},N={__name:"Password",setup(T){const i=b(),r=n({old_pwd:"",new_pwd:"",re_pwd:""}),f=n({old_pwd:[{required:!0,message:"请输入原密码",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"长度在6到16个字符",trigger:"blur"},{validator:(m,e,t)=>{e===r.value.old_pwd?t(new Error("新密码不能与原密码相同")):t()},trigger:"blur"}],re_pwd:[{required:!0,message:"请输入确认密码",trigger:"blur"},{validator:(m,e,t)=>{e!==r.value.new_pwd?t(new Error("两次输入密码不一致")):t()},trigger:"blur"}]}),p=n(),d=n(!1);async function g(){try{d.value=!0,await p.value.validate(),await x(r.value),d.value=!1,i.removeUserInfo(),i.removeToken(),B.push("/login"),C.success("修改密码成功")}catch{d.value=!1}}function c(){p.value.resetFields()}return(m,e)=>{const t=q,u=F,_=k,v=P;return y(),V(z,{title:"修改密码"},{default:l(()=>[o(I,null,{default:l(()=>[o(v,{model:s(r),rules:s(f),"label-width":"100px",style:{width:"600px"},ref_key:"form",ref:p},{default:l(()=>[o(u,{label:"原密码",prop:"old_pwd"},{default:l(()=>[o(t,{modelValue:s(r).old_pwd,"onUpdate:modelValue":e[0]||(e[0]=a=>s(r).old_pwd=a),type:"password","show-password":"",size:"large"},null,8,["modelValue"])]),_:1}),o(u,{label:"新密码",prop:"new_pwd"},{default:l(()=>[o(t,{modelValue:s(r).new_pwd,"onUpdate:modelValue":e[1]||(e[1]=a=>s(r).new_pwd=a),type:"password","show-password":"",size:"large"},null,8,["modelValue"])]),_:1}),o(u,{label:"确认密码",prop:"re_pwd"},{default:l(()=>[o(t,{modelValue:s(r).re_pwd,"onUpdate:modelValue":e[2]||(e[2]=a=>s(r).re_pwd=a),type:"password","show-password":"",size:"large"},null,8,["modelValue"])]),_:1}),o(u,{"label-width":"0"},{default:l(()=>[E("div",S,[o(_,{type:"primary",onClick:g,loading:s(d)},{default:l(()=>e[3]||(e[3]=[w("提交修改")])),_:1},8,["loading"]),o(_,{onClick:c},{default:l(()=>e[4]||(e[4]=[w("重置")])),_:1})])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})}}},$=U(N,[["__scopeId","data-v-682eef4f"]]);export{$ as default};
